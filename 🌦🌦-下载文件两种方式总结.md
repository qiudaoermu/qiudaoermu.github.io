---
title: "ğŸŒ¦ğŸŒ¦-ä¸‹è½½æ–‡ä»¶ä¸¤ç§æ–¹å¼æ€»ç»“"
date: 2021-12-25
tags: 
- å¼€å‘æ—¥å¸¸
---
####  1.åå°æœåŠ¡å™¨æœ‰é™æ€èµ„æºä¸”æ˜¯å›ºå®šçš„æ–‡ä»¶åï¼ˆGETæ–¹å¼ä¸‹è½½æ–‡ä»¶ï¼‰

åœºæ™¯ï¼šå·²ç»ç”Ÿæˆçš„é™æ€æ–‡ä»¶
##### ç¬¬ä¸€ç§ä½¿ç”¨js
```js
window.location.href="http://www.åŸŸå/template.xlsx(æ–‡ä»¶å)"
```
##### ç¬¬äºŒç§ href
```js
<a href="http://www.åŸŸå/template.xlsx(æ–‡ä»¶å)"></a>
```
`ps`: æœ‰è·¨åŸŸé—®é¢˜
#### 2.åå°è¿”å›æ–‡ä»¶æµ
åœºæ™¯ï¼šåŠ¨æ€æ•°æ®ç”Ÿæˆ
#####  ç¬¬ä¸€ç§ Data åè®®
```js
axios.post(è¯·æ±‚è·¯å¾„URL, {å‚æ•°Params}, {
            responseType: 'blob'
          }).then(function(res){
            var blob = res.data;
           // FileReaderä¸»è¦ç”¨äºå°†æ–‡ä»¶å†…å®¹è¯»å…¥å†…å­˜
            var reader = new FileReader();
            reader.readAsDataURL(blob);
            // onloadå½“è¯»å–æ“ä½œæˆåŠŸå®Œæˆæ—¶è°ƒç”¨
            reader.onload = function(e) {
              var a = document.createElement('a');
              // è·å–æ–‡ä»¶åfileName
              var fileName = res.headers["content-disposition"].split("=");
              fileName = fileName[fileName.length - 1];
              fileName = fileName.replace(/"/g, "");
              a.download = fileName;
              a.href = e.target.result;
              document.body.appendChild(a);
              a.click();
              document.body.removeChild(a);
            }
          });
```
##### ç¬¬äºŒç§ä½¿ç”¨ blob + window.URL.createObjectURL
åŠ¨æ€æ•°æ®ä¸‹è½½ï¼ŒåŸç†éƒ½æ˜¯åˆ›å»º blobåè®®çš„é“¾æ¥
```js
//  `responseType` è¡¨ç¤ºæœåŠ¡å™¨å“åº”çš„æ•°æ®ç±»å‹ï¼Œ
//  å¯ä»¥æ˜¯ 'arraybuffer', 'blob', 'document', 'json', 'text', 'stream'ï¼Œ
//  ä¸æ˜¯headerå†…çš„å±æ€§

axios.post(è¯·æ±‚è·¯å¾„URL, {å‚æ•°Params}, {
            responseType: 'blob'
          }).then(function(response){
            const name = "XXX.xls"
             const url = window.URL.createObjectURL(new Blob([response]));
             const link = document.createElement("a");
             link.href = url;
             link.download = name
             document.body.appendChild(link);
             link.click();
             document.body.removeChild(link);
          });
```

##### ç¬¬ä¸‰ç§ href + dataåè®®
é€‚ç”¨äºjsonï¼Œdocument çº¯æ–‡æ¡£ä¸‹è½½
```
function download(filename, text) {
  console.log(filename, text);
  var element = document.createElement("a");
  element.setAttribute(
    "href",
    "data:text/plain;charset=utf-8," + encodeURIComponent(text)
  );
  element.setAttribute("download", filename);

  element.style.display = "none";
  document.body.appendChild(element);

  element.click();

  document.body.removeChild(element);
}

download('download.json', '{a: 1}')
```
