---
  layout: post
  tilte: "2022-03-20-🏂-单例模式.md"
  date: 2022-03-20-
  tags: 
    - 编程范式

---

- content
  {:toc}

单例模式使用

##### Vuex

Vuex 基本原理，在 vue 上挂一个 store 属性，所以这个 store 属性一定要单一，而且不能被覆盖掉。
![](https://upload-images.jianshu.io/upload_images/15312191-3dcb456281a55499.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
Vuex 是 vue 状态管理工具，如果在一个项目里有多个 store,一定乱套了，所以 Vuex 一定是单例模式的。

Vuex 单例模式实现方式

```
let Vue // bind on install
export function install (_Vue) {
  if (Vue && _Vue === Vue) {
    if (__DEV__) {
      console.error(
        '[vuex] already installed. Vue.use(Vuex) should be called only once.'
      )
    }
    return
  }
  Vue = _Vue
  applyMixin(Vue)
}
```

install 的时候，把真 Vue 赋值给 假 Vue, 再次 install 的时候，就会提醒`'[vuex] already installed. Vue.use(Vuex) should be called only once.'`
