---
  layout: post
  tilte: "ğŸ˜„ğŸ˜-è¯»å–åç«¯éªŒè¯ç ï¼ˆä¸€ï¼‰-è§£æå›¾ç‰‡çš„å‡ ç§æ–¹æ³•.md"
  date: 2022-3-16-
  tags: 
    - å¼€å‘æ—¥å¸¸

---


* content
{:toc}


  
![](https://upload-images.jianshu.io/upload_images/15312191-93378d34692cfaa5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#### 1.responseType: blob
##### 1.1 URL.createObjectURL(blob);
```js
const url =  window.URL.createObjectURL(blob);
```
  Object URL æ˜¯ä¸€ç§ä¼ªåè®®ï¼Œä¹Ÿè¢«ç§°ä¸º Blob URLã€‚å®ƒå…è®¸ Blob æˆ– File å¯¹è±¡ç”¨ä½œå›¾åƒï¼Œä¸‹è½½äºŒè¿›åˆ¶æ•°æ®é“¾æ¥ç­‰çš„ URL æºã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ URL.createObjectURL æ–¹æ³•æ¥åˆ›å»º Blob URLï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ª Blob å¯¹è±¡ï¼Œå¹¶ä¸ºå…¶åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ URLï¼Œå…¶å½¢å¼ä¸º blob:<origin>/<uuid>ï¼Œå¯¹åº”çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š

```js
blob:https://example.org/40a5fb5a-d56d-4a33-b4e2-0acf6a8e5f641
```
æµè§ˆå™¨å†…éƒ¨ä¸ºæ¯ä¸ªé€šè¿‡ URL.createObjectURL ç”Ÿæˆçš„ URL å­˜å‚¨äº†ä¸€ä¸ª URL â†’ Blob æ˜ å°„ã€‚å› æ­¤ï¼Œæ­¤ç±» URL è¾ƒçŸ­ï¼Œä½†å¯ä»¥è®¿é—® Blobã€‚ç”Ÿæˆçš„ URL ä»…åœ¨å½“å‰æ–‡æ¡£æ‰“å¼€çš„çŠ¶æ€ä¸‹æ‰æœ‰æ•ˆã€‚ä½†å¦‚æœä½ è®¿é—®çš„ Blob URL ä¸å†å­˜åœ¨ï¼Œåˆ™ä¼šä»æµè§ˆå™¨ä¸­æ”¶åˆ° 404 é”™è¯¯ã€‚

ä¸Šè¿°çš„ Blob URL çœ‹ä¼¼å¾ˆä¸é”™ï¼Œä½†å®é™…ä¸Šå®ƒä¹Ÿæœ‰å‰¯ä½œç”¨ã€‚è™½ç„¶å­˜å‚¨äº† URL â†’ Blob çš„æ˜ å°„ï¼Œä½† Blob æœ¬èº«ä»é©»ç•™åœ¨å†…å­˜ä¸­ï¼Œæµè§ˆå™¨æ— æ³•é‡Šæ”¾å®ƒã€‚æ˜ å°„åœ¨æ–‡æ¡£å¸è½½æ—¶è‡ªåŠ¨æ¸…é™¤ï¼Œå› æ­¤ Blob å¯¹è±¡éšåè¢«é‡Šæ”¾ã€‚ä½†æ˜¯ï¼Œå¦‚æœåº”ç”¨ç¨‹åºå¯¿å‘½å¾ˆé•¿ï¼Œé‚£ä¸ä¼šå¾ˆå¿«å‘ç”Ÿã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Blob URLï¼Œå³ä½¿ä¸å†éœ€è¦è¯¥ Blobï¼Œå®ƒä¹Ÿä¼šå­˜åœ¨å†…å­˜ä¸­ã€‚

é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ URL.revokeObjectURL(url) æ–¹æ³•ï¼Œä»å†…éƒ¨æ˜ å°„ä¸­åˆ é™¤å¼•ç”¨ï¼Œä»è€Œå…è®¸åˆ é™¤ Blobï¼ˆå¦‚æœæ²¡æœ‰å…¶ä»–å¼•ç”¨ï¼‰ï¼Œå¹¶é‡Šæ”¾å†…å­˜ã€‚
##### 1.2 fileReader.readAsDataURL è½¬base64
 ```js
 const blobToBase64 = (blob)  => {
      return new Promise((resolve, reject) => {
        const fileReader = new FileReader();
        fileReader.onload = e => {
          resolve(e.target.result);
        };
        fileReader.readAsDataURL(blob);
        fileReader.onerror = () => {
          reject(new Error("æ–‡ä»¶æµå¼‚å¸¸"));
        };
      });
 }
verificationCode().then(async blob => {
  this.url = blobToBase64(blob)
}

```
base64æ˜¯  Data URIåè®®çš„ä¸€ç§å®ç°ï¼Œåœ¨1998å¹´è¢«ç¡®å®šï¼Œå…·ä½“[Data URIè¯¦ç»†ä»‹ç»](https://juejin.cn/post/6844903940690018312)ã€‚
##### 1.3 blob è½¬ arraybuffer è½¬ base64
```js
verificationCode().then(async blob => {
  transformArrayBufferToBase64(response);
}

const async transformArrayBufferToBase64 = (response) => {
      response = await this.fileReadAsArrayBuffer(response);
      this.url =
        "data:image/png;base64," +
        btoa(
          new Uint8Array(response).reduce(
            (data, byte) => data + String.fromCharCode(byte),
            ""
          )
        );
 }
```
####  2.responseType: arraybuffer
##### 2.1 arraybuffer è½¬ base64
```js
verificationCode().then(blob => {
    this.url = "data:image/png;base64," +
          btoa(
            new Uint8Array(response).reduce(
              (data, byte) => data + String.fromCharCode(byte),
              ""
            )
          );
}

```

#### 3.é¢å¤–çŸ¥è¯†ç‚¹
arraybufferè½¬Blob

 ```js
var buffer = new ArrayBuffer(16);
var blob = new Blob([buffer]);
```
blobè½¬arraybuffer
å€ŸåŠ©FileReaderå¯¹è±¡
```js
var blob = new Blob([1,2,3,4,5]);
var reader = new FileReader();

reader.onload = function() {
    console.log(this.result);
}
reader.readAsArrayBuffer(blob);
```
#### å‚è€ƒèµ„æº
>  [ç©è½¬å‰ç«¯äºŒè¿›åˆ¶](https://segmentfault.com/a/1190000023101367)
[å‰ç«¯äºŒè¿›åˆ¶å­¦ä¹ ](https://www.zhuyuntao.cn/%E5%89%8D%E7%AB%AF%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89)
[ä½ çœŸçš„ä¼šä½¿ç”¨XMLHttpRequestå—](https://segmentfault.com/a/1190000004322487#articleHeader7)
[JSå­—ç¬¦ä¸²ä¸äºŒè¿›åˆ¶çš„ç›¸äº’è½¬åŒ–å®ä¾‹ä»£ç è¯¦è§£](https://www.jb51.net/article/164158.htm)
[ç©è½¬å›¾ç‰‡æµ](https://juejin.cn/post/6844903553140523021#heading-5)
[Base64ç¼–ç åŸç†ä¸åº”ç”¨](http://blog.xiayf.cn/2016/01/24/base64-encoding/ "Permalink to Base64ç¼–ç åŸç†ä¸åº”ç”¨")
[Data URIè¯¦ç»†ä»‹ç»](https://juejin.cn/post/6844903940690018312)
[ç»†è¯´ Data URI](https://www.cnblogs.com/hustskyking/p/data-uri.html)
>
ä¸‹ä¸€ç¯‡ è¯»å–åç«¯éªŒè¯ç ï¼ˆäºŒ)    [resonpseTypeæµ…æ]()
